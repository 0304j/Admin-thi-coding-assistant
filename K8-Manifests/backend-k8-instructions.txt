# First, create the secret with your actual Groq API key
kubectl create namespace backend --dry-run=client -o yaml | kubectl apply -f -
kubectl create secret generic backend-secrets -n backend \
  --from-literal=GROQ_API_KEY='gsk_your_actual_key_here' \
  --dry-run=client -o yaml | kubectl apply -f -

# Then apply the deployment (skip the secret section in the file)
kubectl apply -f k8s/backend-deployment.yaml

# Verify
kubectl get pods -n backend
kubectl get svc -n backend

# Test
curl http://10.10.240.8:30080/health